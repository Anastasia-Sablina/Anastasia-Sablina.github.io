{"meta":{"title":"Anastasia-Lynn's Blog","subtitle":"Welcome, enjoy yourself (*´∀`)","description":"","author":"Анастасия-Саблин","url":"http://anastasia-lynn.gitee.io","root":"/"},"pages":[{"title":"404","text":"","path":"404/index.html","date":"03-05","excerpt":""},{"title":"applications","text":"","path":"applications/index.html","date":"11-28","excerpt":""},{"title":"","text":"import { giteehub as giteehubIcon, spinner as spinnerIcon } from '../icons' import { NOT_INITIALIZED_ERROR } from '../constants' import moment from 'moment' import Atwho from '../atwho' function renderHeader({ meta, user }, instance) { const container = document.createElement('div') container.lang = \"en-US\" container.className = 'gitment-container gitment-header-container' const commentsCount = document.createElement('span') commentsCount.innerHTML = ` ${ meta.comments ? `总评论数 • ${meta.comments} ` : '' } ` container.appendChild(commentsCount) const issueLink = document.createElement('a') issueLink.className = 'gitment-header-issue-link' issueLink.href = meta.html_url issueLink.target = '_blank' issueLink.innerText = 'Issue Page' container.appendChild(issueLink) return container } function renderComments({ meta, comments, currentPage, user, error }, instance) { const container = document.createElement('div') container.lang = \"en-US\" container.className = 'gitment-container gitment-comments-container' if (error) { const errorBlock = document.createElement('div') errorBlock.className = 'gitment-comments-error' if (error === NOT_INITIALIZED_ERROR && user.login && user.login.toLowerCase() === instance.owner.toLowerCase()) { const initHint = document.createElement('div') const initButton = document.createElement('button') initButton.className = 'gitment-comments-init-btn' initButton.onclick = () => { initButton.setAttribute('disabled', true) instance.init() .catch(e => { initButton.removeAttribute('disabled') alert(e) }) } initButton.innerText = '初始化评论' initHint.appendChild(initButton) errorBlock.appendChild(initHint) } else { errorBlock.innerText = error } container.appendChild(errorBlock) return container } else if (comments === undefined) { const loading = document.createElement('div') loading.innerText = 'Loading comments...' loading.className = 'gitment-comments-loading' container.appendChild(loading) return container } else if (!comments.length) { const emptyBlock = document.createElement('div') emptyBlock.className = 'gitment-comments-empty' emptyBlock.innerText = '暂时没有评论！' container.appendChild(emptyBlock) return container } const commentsList = document.createElement('ul') commentsList.className = 'gitment-comments-list' comments.forEach(comment => { const createDate = new Date(comment.created_at) const commentItem = document.createElement('li') commentItem.className = 'gitment-comment' commentItem.innerHTML = ` ${comment.user.name} ${ meta.user.login == comment.user.login ? ` 博主` : '' } 评论创建于 ${moment(createDate).format('YYYY年MM月DD日')} ` convertComment(instance, comment); // dirty // use a blank image to trigger height calculating when element rendered const imgTrigger = document.createElement('img') const markdownBody = commentItem.querySelector('.gitment-comment-body') imgTrigger.className = 'gitment-hidden' imgTrigger.src = \"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" imgTrigger.onload = () => { if (markdownBody.clientHeight > instance.maxCommentHeight) { markdownBody.classList.add('gitment-comment-body-folded') markdownBody.style.maxHeight = instance.maxCommentHeight + 'px' markdownBody.title = 'Click to Expand' markdownBody.onclick = () => { markdownBody.classList.remove('gitment-comment-body-folded') markdownBody.style.maxHeight = '' markdownBody.title = '' markdownBody.onclick = null } } } commentItem.appendChild(imgTrigger) commentsList.appendChild(commentItem) }) container.appendChild(commentsList) if (meta) { const pageCount = Math.ceil(meta.comments / instance.perPage) if (pageCount > 1) { const pagination = document.createElement('ul') pagination.className = 'gitment-comments-pagination' if (currentPage > 1) { const previousButton = document.createElement('li') previousButton.className = 'gitment-comments-page-item' previousButton.innerText = 'Previous' previousButton.onclick = () => instance.goto(currentPage - 1) pagination.appendChild(previousButton) } for (let i = 1; i instance.goto(i) if (currentPage === i) pageItem.classList.add('gitment-selected') pagination.appendChild(pageItem) } if (currentPage < pageCount) { const nextButton = document.createElement('li') nextButton.className = 'gitment-comments-page-item' nextButton.innerText = 'Next' nextButton.onclick = () => instance.goto(currentPage + 1) pagination.appendChild(nextButton) } container.appendChild(pagination) } } return container } function renderEditor({ user, error, comments }, instance) { const container = document.createElement('div') container.lang = \"en-US\" container.className = 'gitment-container gitment-editor-container' const shouldDisable = user.login && !error ? '' : 'disabled' const disabledTip = user.login ? '' : '请登录，在评论！' container.innerHTML = ` ${ user.login ? ` ` : user.isLoggingIn ? `${spinnerIcon}` : ` ${giteehubIcon} ` } 编辑 预览 ${ user.login ? '退出' : user.isLoggingIn ? 'Logging in...' : `登录 码云` } 支持Markdown的样式 评论 ` if (user.login) { container.querySelector('.gitment-editor-logout-link').onclick = () => instance.logout() } const writeField = container.querySelector('.gitment-editor-write-field') const previewField = container.querySelector('.gitment-editor-preview-field') const textarea = writeField.querySelector('textarea') textarea.oninput = () => { textarea.style.height = 'auto' const style = window.getComputedStyle(textarea, null) const height = parseInt(style.height, 10) const clientHeight = textarea.clientHeight const scrollHeight = textarea.scrollHeight if (clientHeight < scrollHeight) { textarea.style.height = (height + scrollHeight - clientHeight) + 'px' } } // 加载@功能 let atwho = new Atwho({ element: textarea, container: container, comments: comments }); const [writeTab, previewTab] = container.querySelectorAll('.gitment-editor-tab') writeTab.onclick = () => { writeTab.classList.add('gitment-selected') previewTab.classList.remove('gitment-selected') writeField.classList.remove('gitment-hidden') previewField.classList.add('gitment-hidden') textarea.focus() } previewTab.onclick = () => { previewTab.classList.add('gitment-selected') writeTab.classList.remove('gitment-selected') previewField.classList.remove('gitment-hidden') writeField.classList.add('gitment-hidden') const preview = previewField.querySelector('.gitment-editor-preview') const content = textarea.value.trim() if (!content) { preview.innerText = '没有预览' return } preview.innerText = '加载预览中...' instance.markdown(content) .then(html => preview.innerHTML = html) } const submitButton = container.querySelector('.gitment-editor-submit') submitButton.onclick = () => { submitButton.innerText = '提交中...' submitButton.setAttribute('disabled', true) instance.post(convertCommentSubmit(textarea.value.trim(), atwho.nameMap)) .then(data => { textarea.value = '' textarea.style.height = 'auto' submitButton.removeAttribute('disabled') submitButton.innerText = '评论' }) .catch(e => { alert(e) submitButton.removeAttribute('disabled') submitButton.innerText = '评论' }) } return container } function renderFooter({}, instance) { const container = document.createElement('div') container.lang = \"en-US\" container.className = 'gitment-container gitment-footer-container' container.innerHTML = ` Powered by Giteement ` return container } function render(state, instance) { const container = document.createElement('div') container.lang = \"en-US\" container.className = 'gitment-container gitment-root-container' container.appendChild(renderHeader(state, instance)) container.appendChild(renderComments(state, instance)) container.appendChild(renderEditor(state, instance)) container.appendChild(renderFooter(state, instance)) return container } function convertCommentSubmit(content, nameMap) { if (content.startsWith(\"@\")) { let logins = content.match(/^@[^ ]*/g); if (logins && logins.length > 0) { logins.forEach(e => { let name = e.substr(1); if (nameMap[name]) { content = content.replace(name, nameMap[name]); } }) } } return content; } function convertComment(instance, comment) { let content = comment.body; let logins = content.match(/^@[^ ]*/g); if (logins && logins.length > 0) { logins.forEach(e => instance.users(e.substr(1)).then(u => { let repStr = \"[@\" + u.name + \"](\" + u.html_url + \")\"; content = content.replace(\"@\"+u.login, repStr); }).catch(() => { })) } instance.markdown(content) .then(html => document.getElementById(comment.id).innerHTML = html.replace(/src=\"\\/assets\\//g, \"src=\\\"https://gitee.com/assets/\")); } export default { render, renderHeader, renderComments, renderEditor, renderFooter }","path":"assets/default.js","date":"03-01","excerpt":""},{"title":"","text":"var Oauthcallback=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,\"a\",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=\"\",n(n.s=0)}([function(e,t,n){\"use strict\";var r=n(1);e.exports=function(){var e=r.Query.parse();e.code&&(window.location.href=decodeURIComponent(e.bkurl+\"?code=\"+e.code))}},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.http=t.Query=t.isString=void 0;var r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var u,a=e[Symbol.iterator]();!(r=(u=a.next()).done)&&(n.push(u.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&a.return&&a.return()}finally{if(o)throw i}}return n}(e,t);throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")}}();t.getTargetContainer=function(e){var t=void 0;t=e instanceof Element?e:i(e)?document.getElementById(e):document.createElement(\"div\");return t};var o=n(2),i=t.isString=function(e){return\"[object String]\"===toString.call(e)};var u=t.Query={parse:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.search;if(!e)return{};var t={};return(\"?\"===e[0]?e.substring(1):e).split(\"&\").forEach(function(e){var n=e.split(\"=\"),o=r(n,2),i=o[0],u=o[1];i&&(t[i]=u)}),t},stringify:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:\"?\",n=Object.keys(e).map(function(t){return t+\"=\"+encodeURIComponent(e[t]||\"\")}).join(\"&\");return n?t+n:\"\"}};function a(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:\"https://gitee.com/api/v5\",i=new XMLHttpRequest,a=localStorage.getItem(o.LS_ACCESS_TOKEN_KEY),c=\"\"+r+t,s=null;\"GET\"!==e&&\"DELETE\"!==e||(c+=u.stringify(n));var l=new Promise(function(e,t){i.addEventListener(\"load\",function(){var n=i.getResponseHeader(\"content-type\"),r=i.responseText;if(/json/.test(n)){var o=i.responseText?JSON.parse(r):{};o.message?t(new Error(o.message)):e(o)}else e(r)}),i.addEventListener(\"error\",function(e){return t(e)})});return i.open(e,c,!0),i.setRequestHeader(\"Accept\",\"application/json, text/plain\"),a&&i.setRequestHeader(\"Authorization\",\"token \"+a),\"GET\"!==e&&\"DELETE\"!==e&&(s=JSON.stringify(n),i.setRequestHeader(\"Content-Type\",\"application/json\")),i.send(s),l}}t.http={get:a(\"GET\"),post:a(\"POST\"),delete:a(\"DELETE\"),put:a(\"PUT\")}},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});t.LS_ACCESS_TOKEN_KEY=\"giteement-comments-token\",t.LS_USER_KEY=\"giteement-user-info\",t.NOT_INITIALIZED_ERROR=new Error(\"Comments Not Initialized\")}]); //# sourceMappingURL=oauthcallback.browser.js.map","path":"assets/oauthcallback.browser.js","date":"03-01","excerpt":""},{"title":"categories","text":"","path":"categories/index.html","date":"11-28","excerpt":""},{"title":"search","text":"","path":"search/index.html","date":"03-05","excerpt":""},{"title":"","text":"var Giteement=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,\"a\",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=\"\",n(n.s=126)}([function(e,t,n){\"use strict\";(function(e){var r,o,a=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e};!function(i,s){\"object\"===a(t)&&void 0!==e?e.exports=s():void 0===(o=\"function\"==typeof(r=s)?r.call(t,n,t,e):r)||(e.exports=o)}(0,function(){var t,r;function o(){return t.apply(null,arguments)}function i(e){return e instanceof Array||\"[object Array]\"===Object.prototype.toString.call(e)}function s(e){return null!=e&&\"[object Object]\"===Object.prototype.toString.call(e)}function u(e){return void 0===e}function d(e){return\"number\"==typeof e||\"[object Number]\"===Object.prototype.toString.call(e)}function l(e){return e instanceof Date||\"[object Date]\"===Object.prototype.toString.call(e)}function c(e,t){var n,r=[];for(n=0;n>>0,r=0;r0)for(n=0;n","path":"assets/giteement.browser.js","date":"03-01","excerpt":""}],"posts":[{"title":"博客配置简述","text":"test About how to set up another environment Preparation nodejs (cnpm) git hexo init 1 Create a folder 2 cd folder, hexo init 3 move source, themes, scaffolds into the folder 4 install packages: hexo-renderer-pandoc pandoc hexo-filter-mathjax hexo-asset-image","path":"Blog-basic/博客配置简述.html","date":"03-01","excerpt":"","tags":[],"preview":"http://http://anastasia-lynn.gitee.io/Blog-basic/%E5%8D%9A%E5%AE%A2%E9%85%8D%E7%BD%AE%E7%AE%80%E8%BF%B0/Azazel2.png"}],"categories":[],"tags":[]}